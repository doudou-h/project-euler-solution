## **[93. Arithmetic expressions](https://projecteuler.net/problem=93)**

### Question
By using each of the digits from the set, {1, 2, 3, 4}, exactly once, and making use of the four arithmetic operations (+, −, *, /) and brackets/parentheses, it is possible to form different positive integer targets.

For example,

8 = (4 * (1 + 3)) / 2

14 = 4 * (3 + 1 / 2)

19 = 4 * (2 + 3) − 1

36 = 3 * 4 * (2 + 1)

Note that concatenations of the digits, like 12 + 34, are not allowed.

Using the set, {1, 2, 3, 4}, it is possible to obtain thirty-one different target numbers of which 36 is the maximum, and each of the numbers 1 to 28 can be obtained before encountering the first non-expressible number.

Find the set of four distinct digits, a < b < c < d, for which the longest set of consecutive positive integers, 1 to n, can be obtained, giving your answer as a string: abcd.

### Solution
A very interesting question. 

There are only five types of [binary expression tree](https://en.wikipedia.org/wiki/Binary_expression_tree) given four numbers and three operators.

```python
from itertools import permutations, combinations, product, count
from operator import mul, add, sub, truediv

def p93():

    def f1(a, b, c, d, op1, op2, op3):
        return op2(op1(a, b), op3(c, d))  # (a b) (c d)

    def f2(a, b, c, d, op1, op2, op3):
        return op3(op2(op1(a, b), c), d)  # ((a b) c) d

    def f3(a, b, c, d, op1, op2, op3):
        return op3(op1(a, op2(b, c)), d)  # (a (b c)) d

    def f4(a, b, c, d, op1, op2, op3):
        return op1(a, op2(b, op3(c, d)))  # a (b (c d))

    def f5(a, b, c, d, op1, op2, op3):
        return op1(a, op3(op2(b, c), d))  # a ((b c) d)

    func_list = [f1, f2, f3, f4, f5]

    def calculate(increase_comb):
        unique = set()
        for a, b, c, d in permutations(increase_comb):
            for op1, op2, op3 in product([add, sub, mul, truediv], repeat=3):
                for f in func_list:
                    try:
                        val = f(a, b, c, d, op1, op2, op3)
                        if val > 0 and val == int(val):
                            unique.add(int(val))
                    except ZeroDivisionError:
                        pass
        return next(i for i in count(1) if i not in unique)

    return ''.join(str(n) for n in max((increase_comb for increase_comb in combinations(range(10), 4)), key=calculate))
```

### Answer 
`1258`
